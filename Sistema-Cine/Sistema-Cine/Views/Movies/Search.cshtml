@model Sistema_Cine.ViewModels.SearchViewModel

@{
    ViewData["Title"] = "Buscar Filmes";
}

<form method="get" asp-action="Search" class="input-group mb-3">
    <input name="q" value="@Model.Query" class="form-control" placeholder="Pesquisar filme no TMDb..." />
    <button class="btn btn-primary" type="submit">Pesquisar</button>
</form>

@if(TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

@if (Model.Results == null || !Model.Results.Any())
{
    <div class="text-muted">Nenhum resultado.</div>
}
else
{
    <div class="row">
        @foreach (var item in Model.Results)
        {
            <div class="col-md-6">
                @await Html.PartialAsync("_MovieCard", item)
            </div>
        }
    </div>

    <nav aria-label="paginacao">
        <ul class="pagination mt-3">
            @if (Model.Page > 1)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Search", "Movies", new { q = Model.Query, page = Model.Page - 1 })">Anterior</a>
                </li>
            }
            <li class="page-item disabled"><span class="page-link">Página @Model.Page de @Model.TotalPages</span></li>
            @if (Model.Page < Model.TotalPages)
            {
                <li class="page-item"><a class="page-link" href="@Url.Action("Search", "Movies", new { q = Model.Query, page = Model.Page + 1 })">Próxima</a></li>
            }
        </ul>
    </nav>
}