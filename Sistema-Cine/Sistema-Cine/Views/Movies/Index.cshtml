@model Sistema_Cine.ViewModels.MoviesIndexViewModel
@{
ViewData["Title"] = "Catálogo de Filmes";
}

<h1 class="display-4">Meu Catálogo de Filmes</h1>

<div class="row mb-4">
    <div class="col-md-4 d-grid gap-2">
        <a asp-action="Create" class="btn btn-primary btn-lg">Criar Novo Filme</a>
    </div>

    <div class="col-md-4 d-grid gap-2">
        <a asp-action="Search" class="btn btn-success btn-lg">Buscar e Importar (TMDb)</a>
    </div>

    <div class="col-md-2 d-grid gap-2">
        <a asp-action="ExportCsv" class="btn btn-outline-secondary">CSV</a>
    </div>

    <div class="col-md-2 d-grid gap-2">
        <a asp-action="ExportExcel" class="btn btn-outline-secondary">Excel</a>
    </div>
</div>

<hr />

@if (!Model.Movies.Any())
{
<p class="text-muted">Nenhum filme cadastrado.</p>
}
else
{
<div class="row g-4">
    @foreach (var filme in Model.Movies)
    {
    <div class="col-md-3">
        @await Html.PartialAsync("_MovieCard", filme)
    </div>
    }
</div>

<!-- paginação -->
<nav class="mt-4">
    <ul class="pagination justify-content-center">
        @if (Model.Page > 1)
        {
        <li class="page-item">
            <a class="page-link" asp-action="Index" asp-route-page="@(Model.Page-1)">Anterior</a>
        </li>
        }

        <li class="page-item disabled">
            <span class="page-link">Página @Model.Page</span>
        </li>

        @if (Model.Page < Model.TotalPages)
        {
        <li class="page-item">
            <a class="page-link" asp-action="Index" asp-route-page="@(Model.Page+1)">Próxima</a>
        </li>
        }
    </ul>
</nav>
}

<!-- MODAL DETAILS -->
<div class="modal fade" id="filmeDetailsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="modalContentContainer"></div>
    </div>
</div>

<!-- MODAL DELETE -->
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content" id="deleteModalContainer"></div>
    </div>
</div>

@section Scripts {
<script src="~/js/details.js"></script>
<script src="~/js/delete.js"></script>
}
